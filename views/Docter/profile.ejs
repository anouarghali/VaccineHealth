<%- include('../partials/Header') %>
<%- include('./partials/header') %>
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-4">
                     <div class="iq-card">
                        <div class="iq-card-body pl-0 pr-0 pt-0">
                           <div class="doctor-details-block">
                              <div class="doc-profile-bg bg-primary" style="height:150px;">
                              </div>
                              <div class="doctor-profile text-center">
                                 <img src="<%=docter.image%>" alt="profile-img" class="avatar-130 img-fluid">
                              </div>
                              <div class="text-center mt-3 pl-3 pr-3">
                                 <h4><b><%= docter.username %> </b></h4>
                                 <p>Médecin</p>
                                 <p class="mb-0"> Specialist <%= docter.specialization %> </p>
                              </div>
                              <hr>
                              <ul class="doctoe-sedual d-flex align-items-center justify-content-between p-0 m-0">
                                 <li class="text-center">
                                    <h3 class="counter"><%= docter.patientsOnTreatment %></h3>
                                    <span>Enfants vaccinés</span>
                                  </li>
                                  <li class="text-center">
                                    <h3><%= docter.appointmentFee %></h3>
                                    <span>Frais de rendez-vous</span>
                                  </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                     <div class="iq-card">
                        <div class="iq-card-header d-flex justify-content-between">
                           <div class="iq-header-title">
                              <h4 class="card-title">Renseignements personnels</h4>
                           </div>
                        </div>
                        <div class="iq-card-body">
                           <div class="about-info m-0 p-0">
                              <div class="row">
                                 <div class="col-4">Prénom:</div>
                                 <% if(docter.fname){ %>
                                    <% var firstName = docter.fname; var lastName = docter.lname %>
                                 <% }else{ %>
                                    <% var indexOfSpace = docter.username.indexOf(" ") %>
                                    <% if(indexOfSpace == -1 ){ %>
                                       <% var firstName = docter.username %>
                                       <% var lastName = "" %>
                                    <% }else{ %>
                                       <% var firstName = docter.username.slice(0,indexOfSpace) %>
                                       <% var lastName = docter.username.slice(indexOfSpace+1,docter.username.length) %> 
                                    <% } %>  
                                 <% } %>
                                 <div class="col-8"> <%= firstName %> </div>
                                 <% if( indexOfSpace != -1 ){ %>
                                    <div class="col-4">Nom</div>
                                    <div class="col-8"> <%= lastName %> </div>
                                 <% } %>
                                 <div class="col-4">Age:</div>
                                 <div class="col-8"> <%= docter.age %>  </div>
                                 <div class="col-4">Téléphone:</div>
                                 <div class="col-8"> <%= docter.mobileNumber %> </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="iq-card">
                        <div class="iq-card-header d-flex justify-content-between">
                           <div class="iq-header-title">
                              <h4 class="card-title">Photos</h4>
                           </div>
                        </div>
                        <div class="iq-card-body">
                           <ul class="profile-img-gallary d-flex flex-wrap p-0 m-0">
                              <% docter.pictures.forEach( eachOne => { %>
                                 <li class="col-md-4 col-6 pb-3">
                                    <img src="<%=eachOne%>" alt="gallary-image" class="img-fluid">
                                 </li>
                              <% } ) %>
                           </ul>
                        </div>
                     </div>
                  </div>
                  <div class="col-lg-8">
                     <div class="row">
                        <div class="col-md-12">
                           <div class="iq-card">
                              <div class="iq-card-header d-flex justify-content-between">
                                 <div class="iq-header-title">
                                    <h4 class="card-title">Education</h4>
                                 </div>
                              </div>
                              <% if(docter.education.length == 0){ %>
                                 <div class="iq-card-body">
                                    <h6>Aucune donnée sur l’éducation n’a encore été ajoutée</h6>
                                    <button id="showEduForm" class="form-group btn btn-warning">Ajouter des données </button>
                                 </div>
                              <% }else{ %>
                                 <div class="iq-card-body"> 
                                    <button id="showEduForm" class="form-group btn btn-warning">Ajouter des données </button>
                                    <table class="table mb-0 table-borderless">
                                    <thead>
                                       <tr>
                                             <th scope="col">Année</th>
                                             <th scope="col">Diplôme</th>
                                             <th scope="col">Institut</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <% var eduIndex = 0  %>
                                       <% docter.education.forEach( (eachOne,eduIndex) => { %>
                                          <tr>
                                             <td> <%= eachOne.year %> </td>
                                             <td> <%= eachOne.degree %> </td>
                                             <td> <%= eachOne.institute %> </td>
                                          
                                             <td> 
                                                <form action="/deleteEdu-<%=eduIndex%>?_method=PUT" method="POST">
                                                   <button class="btn btn-danger" >Supprimer </button>
                                                </form>
                                           </td>
                                          </tr>
                                          <% eduIndex = eduIndex + 1 %>
                                       <% } ) %>
                                    </tbody>
                                 </table>
                                 </div>
                              <% } %>
                              <div class="iq-card" id="formEducation">
                                 <div class="iq-card-header d-flex justify-content-between">
                                    <div class="iq-header-title">
                                       <h4 class="card-title">Ajouter des informations sur l’éducation</h4>
                                    </div>
                                 </div>
                                 <div class="iq-card-body">
                                    <form action="/addEducationInfo?_method=PUT" method="POST" >
                                       <div class=" row align-items-center">
                                          <div class="form-group col-sm-12">
                                             <label for="degree">Diplôme</label>
                                             <input type="text" name="degree" required placeholder="Degree" class="form-control" id="degree">
                                          </div>
                                          <div class="form-group col-sm-12">
                                             <label for="institute">Institut</label>
                                             <input type="text" class="form-control" required placeholder="Institut" name="institute" id="institute">
                                          </div>
                                          <div class="form-group col-sm-6">
                                             <label for="yearOfQ">années de qualification</label>
                                             <input type="number" name="yearOfQ" required placeholder="Années de qualification" class="form-control" id="yearOfQ">
                                          </div>
                                       </div>
                                       <button type="submit" class="btn btn-primary mr-2">Submit</button>
                                       <button id="cancelEduForm" type="reset" class="btn iq-bg-danger">Cancel</button>
                                    </form>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-md-12">
                           <div class="iq-card">
                              <div class="iq-card-header d-flex justify-content-between">
                                 <div class="iq-header-title">
                                    <h4 class="card-title">Experience</h4>
                                 </div>
                              </div>
                              <% if(docter.experience.length == 0){ %>
                                 <div class="iq-card-body">
                                    <h6>  Aucune donnée d’expérience n’a encore été ajoutée!!! </h6>
                                    <button id="showExpForm" class="form-group btn btn-warning">Ajouter des données</button>
                                 </div>
                              <% }else{ %>
                                 <div class="iq-card-body">
                                    <button id="showExpForm" class="form-group btn btn-warning">Ajouter des données</button>
                                    <table class="table mb-0 table-borderless">
                                    <thead>
                                       <tr>
                                             <th scope="col">Année</th>
                                             <th scope="col">Département</th>
                                             <th scope="col">Position</th>
                                             <th scope="col">Hôpital</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <% var Index = 0 %>
                                       <% docter.experience.forEach( eachOne => { %>
                                          <tr>
                                             <td> <%= eachOne.year %> </td>
                                             <td> <%= eachOne.department %> </td>
                                             <td> <%= eachOne.position %>  </td>
                                             <td> <%= eachOne.hospital %>  </td>
                                             <td> 
                                                <form action="/deleteExp-<%=Index%>?_method=PUT" method="POST">
                                                   <button class="btn btn-danger" > Supprimer </button>
                                                </form>
                                             <% Index = Index + 1 %>
                                          </tr>
                                       <% } ) %>
                                    </tbody>
                                 </table>
                                 </div>
                              <% } %>
                              <div class="iq-card" id="formExperience">
                                 <div class="iq-card-header d-flex justify-content-between">
                                    <div class="iq-header-title">
                                       <h4 class="card-title">Ajouter des informations d’expérience</h4>
                                    </div>
                                 </div>
                                 <div class="iq-card-body">
                                    <form action="/addExpInfo?_method=PUT" method="POST" >
                                       <div class=" row align-items-center">
                                          <div class="form-group col-sm-4">
                                             <label for="yearOfQ">Année</label>
                                             <input type="text" name="yearOfQ" required placeholder="e.g. 2010-2014" class="form-control" id="yearOfQ">
                                          </div>
                                          <div class="form-group col-sm-8">
                                             <label for="dept">Département</label>
                                             <input type="text" name="dept" required placeholder="Département" class="form-control" id="dept">
                                          </div>
                                          <div class="form-group col-sm-8">
                                             <label for="hospital">Hôpital:</label>
                                             <input type="text" name="hospital" required placeholder="Hospital" class="form-control" id="hospital">
                                          </div>
                                          <div class="form-group col-sm-4">
                                             <label>Position:</label>
                                             <select class="form-control" required name="position" id="exampleFormControlSelect4">
                                                <option selected="">Medecin principal</option>
                                                <option>Assistante des services aux patients</option>
                                                <option>Chirurgien</option>
                                                <option>Infirmière</option>
                                                <option>Clinal Assistant</option>
                                             </select>
                                          </div>
                                       </div>
                                       <button type="submit" class="btn btn-primary mr-2">Envoyer</button>
                                       <button id="cancelExpForm" type="reset" class="btn iq-bg-danger">Annuler</button>
                                    </form>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <!-- Footer -->
             <%- include('../partials/Footer') %>
   </body>
</html>
<script>
   var status = "hide" ;
   $("#formEducation").hide(true)
   $("#showEduForm").click(function(){
     if(status === "hide"){
       $("#formEducation").show(true)
       status = "show"
     }else{
       $("#formEducation").hide(true)
       status = "hide"
     }
   })
   $("#cancelEduForm").click(function(){
      $("#formEducation").hide(true)
      status = "hide"
   })
   var status2 = "hide" ;
   $("#formExperience").hide(true)
   $("#showExpForm").click(function(){
     if(status2 === "hide"){
       $("#formExperience").show(true)
       status2 = "show"
     }else{
       $("#formExperience").hide(true)
       status2 = "hide"
     }
   })
   $("#cancelExpForm").click(function(){
      $("#formExperience").hide(true)
      status2 = "hide"
   })
 </script>